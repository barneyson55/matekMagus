<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Karakterlap</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        :root {
            --accent: #5865f2;
            --surface: #f5f7fb;
            --panel: rgba(255, 255, 255, var(--module-card-opacity, 0.92));
            --panel-strong: rgba(255, 255, 255, var(--module-card-opacity, 1));
            --text: #1f2933;
            --muted: #6b7280;
            --border: rgba(15, 23, 42, 0.1);
            --overlay: rgba(255, 255, 255, 0.8);
            --success: #2ecc71;
            --warning: #f39c12;
            --avatar-image: radial-gradient(circle at 30% 30%, #8b93a7, #2e3642);
        }

        * { box-sizing: border-box; }
        html, body { background-color: transparent; height: 100%; }
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            color: var(--text);
            padding: 32px;
            min-height: 0;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: var(--overlay);
            pointer-events: none;
            z-index: 0;
        }

        .sheet {
            position: relative;
            z-index: 1;
            display: grid;
            grid-template-columns: minmax(320px, 1fr) minmax(320px, 1fr);
            grid-template-rows: minmax(0, 1fr);
            gap: 24px;
            flex: 1;
            min-height: 0;
        }
        .card {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 20px 45px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            min-height: 0;
            overflow: hidden;
        }
        .tabs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 16px;
            flex-shrink: 0;
        }
        .tab-button {
            border: 1px solid transparent;
            background: rgba(255, 255, 255, 0.6);
            color: var(--text);
            padding: 10px 12px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: border-color 0.2s ease, transform 0.2s ease;
        }
        .tab-button.is-active {
            border-color: var(--accent);
            transform: translateY(-1px);
            background: var(--panel-strong);
        }
        .tab-panel {
            display: none;
            flex: 1;
            min-height: 0;
            overflow-y: auto;
            padding-right: 6px;
            padding-bottom: 4px;
            scrollbar-gutter: stable;
            flex-direction: column;
            gap: 12px;
        }
        .tab-panel.is-active { display: flex; }
        .list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 12px;
        }
        .list-item {
            width: 100%;
            text-align: left;
            background: var(--panel-strong);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 14px;
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 12px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
        }
        .list-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        .list-item:focus-visible {
            outline: none;
            border-color: var(--accent);
            transform: translateY(-1px);
            box-shadow: 0 0 0 2px var(--accent) inset, 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        .list-item:disabled {
            cursor: default;
            opacity: 0.6;
            transform: none;
            box-shadow: none;
        }
        .item-title { font-weight: 600; overflow-wrap: anywhere; }
        .item-meta { color: var(--muted); font-size: 0.9rem; line-height: 1.35; overflow-wrap: anywhere; }
        .empty-state {
            padding: 16px;
            border-radius: 12px;
            border: 1px dashed var(--border);
            color: var(--muted);
            background: rgba(255, 255, 255, 0.5);
            display: grid;
            gap: 6px;
            text-align: center;
            justify-items: center;
            min-height: 80px;
            line-height: 1.4;
        }
        .empty-state strong {
            color: var(--text);
            font-weight: 600;
        }
        .empty-state span {
            font-size: 0.85rem;
        }
        .section-title {
            margin: 10px 0 6px;
            font-size: 1rem;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 34px;
            height: 34px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            font-weight: 700;
            flex-shrink: 0;
        }
        .badge.success { background: var(--success); }
        .badge.warning { background: var(--warning); }

        .profile {
            display: flex;
            flex-direction: column;
            gap: 18px;
            min-height: 0;
            overflow: hidden;
        }
        .profile-header {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        .avatar {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            background: var(--avatar-image);
            background-size: cover;
            background-position: center;
            border: 2px solid rgba(255, 255, 255, 0.6);
        }
        .profile-header h2 {
            margin: 0 0 4px;
            font-size: 1.4rem;
        }
        .profile-header p {
            margin: 0;
            color: var(--muted);
        }
        .xp-block {
            background: var(--panel-strong);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 14px 16px;
            display: grid;
            gap: 8px;
        }
        .xp-meta {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
        }
        .xp-bar {
            height: 12px;
            background: rgba(0, 0, 0, 0.08);
            border-radius: 999px;
            overflow: hidden;
        }
        .xp-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent), #9f7bff);
            transition: width 0.3s ease;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 12px;
        }
        .stat-card {
            background: var(--panel-strong);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 14px;
        }
        .stat-card span { color: var(--muted); font-size: 0.85rem; }
        .stat-card strong { display: block; margin-top: 4px; font-size: 1.2rem; }
        .achievement-section {
            display: flex;
            flex-direction: column;
            gap: 12px;
            min-height: 0;
            flex: 1;
        }
        .achievement-list {
            display: grid;
            gap: 10px;
            flex: 1;
            min-height: 0;
            overflow-y: auto;
            padding-right: 4px;
            scrollbar-gutter: stable;
        }
        .achievement-item {
            background: var(--panel-strong);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 14px;
            display: grid;
            grid-template-columns: 40px 1fr;
            gap: 12px;
            align-items: start;
        }
        .achievement-item h4 { margin: 0; font-size: 1rem; }
        .achievement-item p { margin: 0; color: var(--muted); font-size: 0.9rem; }
        .achievement-item.is-locked {
            opacity: 0.65;
            border-style: dashed;
        }
        .achievement-item.is-unlocked {
            border-color: var(--success);
        }
        .achievement-badge {
            width: 38px;
            height: 38px;
            border-radius: 12px;
            background: rgba(88, 101, 242, 0.15);
            border: 1px solid var(--border);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--accent);
        }
        .achievement-item.is-unlocked .achievement-badge {
            background: rgba(46, 204, 113, 0.18);
            color: var(--success);
            border-color: rgba(46, 204, 113, 0.4);
        }
        .achievement-details {
            display: grid;
            gap: 6px;
        }
        .achievement-title-row {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            gap: 8px;
            flex-wrap: wrap;
        }
        .achievement-tag {
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            padding: 2px 8px;
            border-radius: 999px;
            background: rgba(88, 101, 242, 0.14);
            color: var(--accent);
        }
        .achievement-meta {
            font-size: 0.85rem;
            color: var(--muted);
        }
        .achievement-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        .achievement-reward {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent);
        }
        .trend-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 12px;
        }
        .trend-card {
            background: var(--panel-strong);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 14px;
            display: grid;
            gap: 6px;
        }
        .trend-card span { color: var(--muted); font-size: 0.85rem; }
        .trend-card strong { font-size: 1.1rem; }
        .trend-pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            align-self: flex-start;
        }
        .trend-pill.up { background: rgba(46, 204, 113, 0.18); color: var(--success); }
        .trend-pill.down { background: rgba(231, 76, 60, 0.18); color: #c0392b; }
        .trend-pill.flat { background: rgba(243, 156, 18, 0.2); color: var(--warning); }
        .trend-note { margin-top: 10px; color: var(--muted); font-size: 0.85rem; }
        .item-details { display: grid; gap: 4px; flex: 1; min-width: 0; }
        .item-details .item-meta { font-size: 0.85rem; }

        @media (max-width: 960px) {
            .sheet {
                grid-template-columns: 1fr;
                grid-template-rows: none;
                height: auto;
                flex: 0 0 auto;
            }
            .trend-grid {
                grid-template-columns: 1fr;
            }
            body {
                overflow: auto;
            }
            .card {
                overflow: visible;
            }
            .tab-panel {
                overflow: visible;
                padding-right: 0;
            }
            .achievement-section {
                flex: 0 0 auto;
            }
            .achievement-list {
                overflow: visible;
                padding-right: 0;
            }
        }
    
        /* Touch targets */
        button {
            min-height: 44px;
            min-width: 44px;
            font: inherit;
            color: inherit;
        }
        .tab-button:focus-visible {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px var(--accent);
        }
</style>
</head>
<body>
    <div class="sheet" data-testid="character-sheet">
        <section class="card" data-testid="character-sheet-left">
            <div class="tabs" role="tablist" aria-label="Karakterlap n&eacute;zetek" data-testid="character-sheet-tabs">
                <button class="tab-button is-active" type="button" data-tab="active" id="tab-button-active" role="tab" aria-selected="true" aria-controls="tab-active" tabindex="0" data-testid="character-sheet-tab-active">Akt&iacute;v k&uuml;ldet&eacute;seim</button>
                <button class="tab-button" type="button" data-tab="results" id="tab-button-results" role="tab" aria-selected="false" aria-controls="tab-results" tabindex="-1" data-testid="character-sheet-tab-results">Eredm&eacute;nyeim</button>
            </div>

            <div class="tab-panel is-active" id="tab-active" role="tabpanel" aria-labelledby="tab-button-active" data-testid="character-sheet-panel-active">
                <ul class="list" id="active-quest-list" data-testid="character-sheet-active-list"></ul>
                <div class="empty-state" id="active-empty" style="display:none;" data-testid="character-sheet-active-empty">
                    <strong>M&eacute;g nincs akt&iacute;v k&uuml;ldet&eacute;s.</strong>
                    <span>V&aacute;lassz modult a K&uuml;ldet&eacute;snapl&oacute;ban, &eacute;s fogadj el egy k&uuml;ldet&eacute;st.</span>
                </div>
            </div>

            <div class="tab-panel" id="tab-results" role="tabpanel" aria-labelledby="tab-button-results" hidden data-testid="character-sheet-panel-results">
                <div class="section-title">Kimaxolt modulok</div>
                <ul class="list" id="completed-quest-list" data-testid="character-sheet-completed-list"></ul>
                <div class="empty-state" id="completed-empty" style="display:none;" data-testid="character-sheet-completed-empty">
                    <strong>M&eacute;g nincs kimaxolt modul.</strong>
                    <span>Teljes&iacute;ts teszteket &eacute;s gyakorl&aacute;st, hogy kimaxolj egy modult.</span>
                </div>

                <div class="section-title">Trend &ouml;sszegz&eacute;s</div>
                <div class="trend-grid" id="trend-grid" data-testid="character-sheet-trend-grid">
                    <div class="trend-card">
                        <span>Ut&oacute;bbi 5 teszt &aacute;tlaga</span>
                        <strong id="trend-last-avg">-</strong>
                        <span id="trend-last-count">0 teszt</span>
                    </div>
                    <div class="trend-card">
                        <span>El&#337;z&#337; 5 teszt &aacute;tlaga</span>
                        <strong id="trend-prev-avg">-</strong>
                        <span id="trend-prev-count">0 teszt</span>
                    </div>
                    <div class="trend-card">
                        <span>Trend</span>
                        <strong id="trend-delta">-</strong>
                        <span id="trend-direction" class="trend-pill flat">Nincs adat</span>
                    </div>
                </div>
                <div class="trend-note" id="trend-note"></div>
                <div class="empty-state" id="trend-empty" style="display:none;" data-testid="character-sheet-trend-empty">
                    <strong>M&eacute;g nincs elegend&#337; teszteredm&eacute;ny trendhez.</strong>
                    <span>T&ouml;lts ki legal&aacute;bb 6 tesztet a trendhez.</span>
                </div>

                <div class="section-title">T&eacute;mak&ouml;r betekint&eacute;s</div>
                <ul class="list" id="topic-insights-list" data-testid="character-sheet-topic-insights"></ul>
                <div class="empty-state" id="topic-insights-empty" style="display:none;" data-testid="character-sheet-topic-insights-empty">
                    <strong>M&eacute;g nincsenek t&eacute;mak&ouml;r adatok.</strong>
                    <span>Teljes&iacute;ts n&eacute;h&aacute;ny tesztet, hogy l&aacute;ssuk a t&eacute;mak&ouml;r adatait.</span>
                </div>

                <div class="section-title">Legut&oacute;bbi tesztek</div>
                <ul class="list" id="recent-results-list" data-testid="character-sheet-recent-results"></ul>
                <div class="empty-state" id="results-empty" style="display:none;" data-testid="character-sheet-results-empty">
                    <strong>M&eacute;g nincsenek mentett teszteredm&eacute;nyek.</strong>
                    <span>Ind&iacute;ts tesztet egy modulban, &eacute;s itt megjelennek.</span>
                </div>
            </div>
        </section>

        <section class="card profile" data-testid="character-sheet-right">
            <div class="profile-header" data-testid="character-sheet-profile-header">
                <div class="avatar"></div>
                <div>
                    <h2 id="profile-level">Lv. 1</h2>
                    <p id="profile-xp">&Ouml;sszes XP: 0</p>
                    <p id="profile-next">K&ouml;vetkez&#337; szint: 0 XP</p>
                </div>
            </div>

            <div class="xp-block" data-testid="character-sheet-xp">
                <div class="xp-meta">
                    <span id="xp-progress-text">0 / 50 XP</span>
                    <span id="xp-percent-text">0%</span>
                </div>
                <div class="xp-bar">
                    <div class="xp-bar-fill" id="xp-bar-fill"></div>
                </div>
            </div>

            <div class="stats-grid" data-testid="character-sheet-stats">
                <div class="stat-card">
                    <span>Akt&iacute;v k&uuml;ldet&eacute;sek</span>
                    <strong id="stat-active">0</strong>
                </div>
                <div class="stat-card">
                    <span>Kimaxolt modulok</span>
                    <strong id="stat-completed">0</strong>
                </div>
                <div class="stat-card">
                    <span>&Ouml;sszes teszt</span>
                    <strong id="stat-tests">0</strong>
                </div>
                <div class="stat-card">
                    <span>Gyakorl&aacute;s XP</span>
                    <strong id="stat-practice-xp">0</strong>
                </div>
            </div>

            <div class="achievement-section">
                <div class="section-title">Achievementek</div>
                <div class="achievement-list" id="achievement-list" data-testid="character-sheet-achievements"></div>
                <div class="empty-state" id="achievement-empty" style="display:none;" data-testid="character-sheet-achievements-empty">
                    <strong>M&eacute;g nincsenek achievementek.</strong>
                    <span>Teljes&iacute;ts k&uuml;ldet&eacute;seket &eacute;s teszteket a felold&aacute;shoz.</span>
                </div>
            </div>
        </section>
    </div>

    <script src="character_sheet.js"></script>
</body>
</html>
